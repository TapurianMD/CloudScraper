<!-- Copyright Â© 2016, Xerxes Langerudi. All rights reserved. -->

<!doctype html>

<html>
<head>
	<title>CloudScraperBuilder</title>
</head>

<style>

.canvas
{
	float: right;
}

#menu
{
	width: 276px;
	height: 300px;
	font: 16px Verdana;
	float: left;
}

.header
{
	width: 276px;
	height: 50px;
	font-size: 25px;
	color: blue;
}

.itemDescription
{
	width: 276px;
	float: left;
	color: fuchsia;
}

.itemHolder
{
	width: 276px;
	float: left;
}

select
{
	width: 140px;
}

</style>

<body>
	<form>
	<div id="menu">
		<div class="header">
		CloudScraper Builder
		</div>

		<div class="itemDescription">
		Number of floors:
		</div>
		<div class="itemHolder">
			<select name="floorNumbers" id="floorNumbers">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>
			</select>
		</div>

		<div class="itemDescription">
		Width:
		</div>
		<div class="itemHolder">
			<select name="width" id="width">
				<option value="10">10</option>
				<option value="11">11</option>
				<option value="12">12</option>
				<option value="13">13</option>
				<option value="14">14</option>
				<option value="15">15</option>
				<option value="16">16</option>
				<option value="17">17</option>
				<option value="18">18</option>
				<option value="19">19</option>
				<option value="20">20</option>
				<option value="21">21</option>
				<option value="22">22</option>
				<option value="23">23</option>
				<option value="24">24</option>
				<option value="25">25</option>
				<option value="26">26</option>
				<option value="27">27</option>
				<option value="28">28</option>
				<option value="29">29</option>
				<option value="30">30</option>
			</select>
		</div>

		<div class="itemDescription">
		Color:
		</div>
		<div class="itemHolder">
			<select name="color" id="color">
				<option value="Cool">Cool</option>
				<option value="Hot">Hot</option>
				<option value="Bright">Bright</option>
				<option value="Dark">Dark</option>
				<option value="Tasty">Tasty</option>
				<option value="Gold">Gold</option>
				<option value="Orange">Orange</option>
			</select>
		</div>

		<div class="itemDescription">
		Type:
		</div>
		<div class="itemHolder">
			<select name="type" id="type">
				<option value="Trade Center">Trade Center</option>
				<option value="Research Center">Research Center</option>
				<option value="Hospital">Hospital</option>
				<option value="University">University</option>
				<option value="Central Command">Central Command</option>
				<option value="Hotel">Hotel</option>
				<option value="Residential">Residential</option>
				<option value="Brothel">Brothel</option>
			</select>
		</div>

		<div class="itemDescription">
		Show:
		</div>
		<div class="itemHolder">
			<select name="show" id="show">
				<option value="All">All</option>
				<option value="Plumping">Plumping</option>
				<option value="Wiring">Wiring</option>
				<option value="Lamps">Lamps</option>
				<option value="Structure">Structure</option>
			</select>
		</div>

		<div class="itemDescription">
		Security:
		</div>
		<div class="itemHolder">
			<select name="security" id="security">
				<option value="Optimism">Optimism</option>
				<option value="Special forces">Special forces</option>
				<option value="Tank">Tank</option>
				<option value="Helicopter">Helicopter</option>
				<option value="CCTV">CCTV</option>
				<option value="Paranoia">Paranoia</option>
			</select>
		</div>
	</div>
</form>

<canvas width="970" height="650" class="canvas" id="canvas"></canvas>

<script type="text/javascript">

// Building
var buildingWindowColor;
var buildingDoorColor;
var buildingWallColor;
var buildingFirstFloorWallColor;
var buildingBannerColor;
var buildingBannerTextColor;


// Helicopter
var helicopterRotorColor;
var helicopterRotorHolderColor;
var helicopterBodyColor;
var helicopterWindowColor;
var helicopterBackRotorColor;
var helicopterBackRotorHolderColor;
var helicopterOrdnanceHolderColor;
var helicopterOrdnanceColor;


// Tank
var tankFirearmsColor;
var tankWeaponMounterColor;
var tankBodyColor;
var tankWheelColor;
var tankChainColor;

var canvas = document.querySelector("#canvas");
var cx = canvas.getContext("2d");

canvas.width = screen.width - 401;

var bigENOUGH = true;

if (screen.width < 1041)
{
	alert("This App works only on screens with a width larger than 1041px.");

	bigENOUGH = false;

	var menu = document.querySelector("#menu");

	menu.style.display = "none";
}
else if (screen.width < 1366)
{
	alert("This App works best on screens with a larger size.");
}

myCanvasX = canvas.width;
myCanvasY = canvas.height;

function setColor(color)
{
	if (color == "Cool")
	{
		buildingWindowColor = "cyan";
		buildingDoorColor = "cyan";
		buildingWallColor = "grey";
		buildingFirstFloorWallColor = "grey";
		buildingBannerColor = "grey";
		buildingBannerTextColor = "cyan";

		helicopterRotorColor = "grey";
		helicopterRotorHolderColor = "grey";
		helicopterBodyColor = "grey";
		helicopterWindowColor = "cyan";
		helicopterBackRotorColor = "grey";
		helicopterbackRotorHolderColor = "grey";
		helicopterOrdnanceHolderColor = "grey";
		helicopterOrdnanceColor = "grey";

		tankFirearmsColor = "grey";
		tankWeaponMounterColor = "grey";
		tankBodyColor = "grey";
		tankWheelColor = "cyan";
		tankChainColor = "grey";
	}
	else if (color == "Hot")
	{
		buildingWindowColor = "pink";
		buildingDoorColor = "pink";
		buildingWallColor = "grey";
		buildingFirstFloorWallColor = "grey";
		buildingBannerColor = "grey";
		buildingBannerTextColor = "pink";

		helicopterRotorColor = "grey";
		helicopterRotorHolderColor = "grey";
		helicopterBodyColor = "grey";
		helicopterWindowColor = "pink";
		helicopterBackRotorColor = "grey";
		helicopterbackRotorHolderColor = "grey";
		helicopterOrdnanceHolderColor = "grey";
		helicopterOrdnanceColor = "grey";

		tankFirearmsColor = "grey";
		tankWeaponMounterColor = "grey";
		tankBodyColor = "grey";
		tankWheelColor = "pink";
		tankChainColor = "grey";
	}
	else if (color == "Bright")
	{
		buildingWindowColor = "lavender";
		buildingDoorColor = "lavender";
		buildingWallColor = "lightblue";
		buildingFirstFloorWallColor = "lightblue";
		buildingBannerColor = "lightblue";
		buildingBannerTextColor = "lavender";

		helicopterRotorColor = "lightblue";
		helicopterRotorHolderColor = "lightblue";
		helicopterBodyColor = "lightblue";
		helicopterWindowColor = "lavender";
		helicopterBackRotorColor = "lightblue";
		helicopterbackRotorHolderColor = "lightblue";
		helicopterOrdnanceHolderColor = "lightblue";
		helicopterOrdnanceColor = "lightblue";

		tankFirearmsColor = "lightblue";
		tankWeaponMounterColor = "lightblue";
		tankBodyColor = "lightblue";
		tankWheelColor = "lavender";
		tankChainColor = "lightblue";
	}
	else if (color == "Dark")
	{
		buildingWindowColor = "black";
		buildingDoorColor = "black";
		buildingWallColor = "grey";
		buildingFirstFloorWallColor = "grey";
		buildingBannerColor = "grey";
		buildingBannerTextColor = "black";

		helicopterRotorColor = "grey";
		helicopterRotorHolderColor = "grey";
		helicopterBodyColor = "grey";
		helicopterWindowColor = "black";
		helicopterBackRotorColor = "grey";
		helicopterbackRotorHolderColor = "grey";
		helicopterOrdnanceHolderColor = "grey";
		helicopterOrdnanceColor = "grey";

		tankFirearmsColor = "grey";
		tankWeaponMounterColor = "grey";
		tankBodyColor = "grey";
		tankWheelColor = "black";
		tankChainColor = "grey";
	}
	else if (color == "Tasty")
	{
		buildingWindowColor = "fuchsia";
		buildingDoorColor = "fuchsia";
		buildingWallColor = "purple";
		buildingFirstFloorWallColor = "purple";
		buildingBannerColor = "purple";
		buildingBannerTextColor = "fuchsia";

		helicopterRotorColor = "purple";
		helicopterRotorHolderColor = "purple";
		helicopterBodyColor = "purple";
		helicopterWindowColor = "fuchsia";
		helicopterBackRotorColor = "purple";
		helicopterbackRotorHolderColor = "purple";
		helicopterOrdnanceHolderColor = "purple";
		helicopterOrdnanceColor = "purple";

		tankFirearmsColor = "purple";
		tankWeaponMounterColor = "purple";
		tankBodyColor = "purple";
		tankWheelColor = "fuchsia";
		tankChainColor = "purple";
	}
	else if (color == "Gold")
	{
		buildingWindowColor = "gold";
		buildingDoorColor = "gold";
		buildingWallColor = "red";
		buildingFirstFloorWallColor = "red";
		buildingBannerColor = "red";
		buildingBannerTextColor = "gold";

		helicopterRotorColor = "red";
		helicopterRotorHolderColor = "red";
		helicopterBodyColor = "red";
		helicopterWindowColor = "gold";
		helicopterBackRotorColor = "red";
		helicopterbackRotorHolderColor = "red";
		helicopterOrdnanceHolderColor = "red";
		helicopterOrdnanceColor = "red";

		tankFirearmsColor = "red";
		tankWeaponMounterColor = "red";
		tankBodyColor = "red";
		tankWheelColor = "gold";
		tankChainColor = "red";
	}
	else if (color == "Orange")
	{
		buildingWindowColor = "Orange";
		buildingDoorColor = "Orange";
		buildingWallColor = "darkblue";
		buildingFirstFloorWallColor = "darkblue";
		buildingBannerColor = "darkblue";
		buildingBannerTextColor = "Orange";

		helicopterRotorColor = "darkblue";
		helicopterRotorHolderColor = "darkblue";
		helicopterBodyColor = "darkblue";
		helicopterWindowColor = "Orange";
		helicopterBackRotorColor = "darkblue";
		helicopterbackRotorHolderColor = "darkblue";
		helicopterOrdnanceHolderColor = "darkblue";
		helicopterOrdnanceColor = "darkblue";

		tankFirearmsColor = "darkblue";
		tankWeaponMounterColor = "darkblue";
		tankBodyColor = "darkblue";
		tankWheelColor = "Orange";
		tankChainColor = "darkblue";
	}
}

function drawRoof(x, y, width, height, type)
{
	cx.fillStyle = buildingBannerColor;
	cx.fillRect(x, y, width, height);
	cx.strokeStyle = "white";
	cx.strokeRect(x, y, width, height);

	type = "Cloud " + type;

	// Determine font size that can fit on the wall size
	var fontPX = width / type.length * 1.5

	// Max font size
	fontPX = fontPX > 30? 30 : fontPX;

	// Banner text
	cx.fillStyle = buildingBannerTextColor;
	cx.font = fontPX + "px Verdana";
	cx.fillText(type, x + 10, y + 30);
}

function drawFloor(x, y, width, height, show)
{
	switch (show)
	{
		case "All":
			cx.fillStyle = buildingWallColor;
			cx.fillRect(x, y, width, height);
			cx.strokeStyle = "white";
			cx.strokeRect(x, y, width, height);

			// Window
			cx.fillStyle = buildingWindowColor;

			var windowWidth = width / 2 - 6;

			cx.fillRect(x + 4, y, width / 2 - 6, height / 2);

			cx.fillRect(x + 4 + windowWidth + 4, y, windowWidth, height / 2);
		break;
		case "Plumping":
			cx.fillStyle = "blue";

			// Upward
			cx.fillRect(x + 5, y, 5, height);


			// Crosswise
			cx.fillRect(x, y + height, width, 5);
		break;
		case "Wiring":
			cx.fillStyle = "red";

			// Upward
			cx.fillRect(x + 2, y, 2, height);


			// Crosswise
			cx.fillRect(x, y + height, width, 2);
		break;
		case "Lamps":
			cx.fillStyle = "gold";

			// Roof
			for (myI = x; myI < (x + width); myI = myI + 40)
			{
				cx.fillRect(myI, y, 8, 2);			
			}
		break;
		case "Structure":
			cx.fillStyle = "grey";

			// Pillar 1
			cx.fillRect(x, y, 20, height);

			// Pillar 2
			cx.fillRect(x + width - 20, y, 20, height);

			// Crosswise
			cx.fillRect(x, y, width, 10);
		break;
	}
}

function drawFirstFloor(x, y, width, height, floorNumber)
{
	cx.fillStyle = buildingFirstFloorWallColor;
	cx.fillRect(x, y, width, height);

	// Determine door height and width based on building size
	var doorHeight = height / 1.5 + floorNumber * 1;
	var doorWidth = 25 + (floorNumber * 5);

	// Door
	cx.fillStyle = buildingDoorColor;
	cx.fillRect(x + 10, y + height - doorHeight, doorWidth, doorHeight);
}


function drawBuilding(foundationX, foundationY, x, y, floorNumber, type, color, show)
{
	// Clear clouds
	cx.fillStyle = "white";
	cx.fillRect(0, 0, myCanvasX, myCanvasY);


	// Max width allowed
	cx.fillStyle = "white";
	cx.fillRect(0, 0, myCanvasX, myCanvasY);

	// Max width allowed
	x = x > 300? 300 : x;

	// min width allowed
	x = x < 100? 100 : x;

	// Max height per floor allowed
	y = y > 50? 50 : y;

	// Min height per floor allowed
	y = y < 40? 40 : y;

	// Max floors allowed
	floorNumber = floorNumber > 10? 10 : floorNumber;

	// Min floors allowed
	floorNumber = floorNumber < 1? 1 : floorNumber;

	width = x;
	height = y;
	
	setColor(color);

	drawFirstFloor(foundationX, foundationY, width, height, floorNumber)

	for (i = 0; i < floorNumber; i++)
	{
		drawFloor(foundationX, foundationY - y - (i * y), width, height, show)
	}

	drawRoof(foundationX, foundationY - y - (i * y), width, height, type);
}


function drawTank(x, y, size)
{
	// Firearms
	cx.beginPath();
	cx.moveTo(x + 55 * size, y + 10 * size);
	cx.lineTo(x + 55 * size, y);
	cx.lineTo(x + 25 * size, y);
	cx.lineTo(x + 65 * size, y);

	cx.strokeStyle = tankFirearmsColor;
	cx.stroke();

	// Weapon mounter
	cx.beginPath();
	cx.moveTo(x + 35 * size, y + 20 * size);
	cx.lineTo(x + 45 * size, y + 10 * size);
	cx.lineTo(x + 65 * size, y + 10 * size);
	cx.lineTo(x + 75 * size, y + 20 * size);

	cx.strokeStyle = tankWeaponMounterColor;
	cx.stroke();

	// Body
	cx.beginPath();
	cx.moveTo(x, y + 40 * size);
	cx.lineTo(x + 25 * size, y + 20 * size);
	cx.lineTo(x + 85 * size, y + 20 * size);
	cx.lineTo(x + 110 * size, y + 40 * size);
	cx.lineTo(x + 95 * size, y + 60 * size);
	cx.lineTo(x + 15 * size, y + 60 * size);
	cx.lineTo(x, y + 40 * size);

	cx.fillStyle = tankBodyColor;
	cx.fill();

	// 1st wheel
	cx.beginPath();
	cx.arc(x + 15 * size, y + 75 * size, 10 * size, 0, 7);

	cx.fillStyle = tankWheelColor;
	cx.fill();

	// 2nd wheel
	cx.beginPath();
	cx.arc(x + 40 * size, y + 75 * size, 10 * size, 0, 7);
	cx.fill();

	// 3rd wheel
	cx.beginPath();
	cx.arc(x + 65 * size, y + 75 * size, 10 * size, 0, 7);
	cx.fill();

	// 4th wheel
	cx.beginPath();
	cx.arc(x + 90 * size, y + 75 * size, 10 * size, 0, 7);
	cx.fill();

	// Front chain
	cx.beginPath();
	cx.arc(x + 10 * size, y + 75 * size, 12 * size, 1.8, 4.5);

	cx.strokeStyle = tankChainColor;
	cx.stroke();

	cx.lineTo(x + 98 * size, y + 63 * size);
	cx.stroke();

	// End chain
	cx.beginPath();
	cx.arc(x + 95 * size, y + 75 * size, 12 * size, 5, 7.6);
	cx.stroke();

	cx.lineTo(x + 7 * size, y + 87 * size);
	cx.stroke();
}

var helicopter = {
x: 0,
y: 0,
inXPrevious: 0,
inYPrevious: 0,
shakeSize: 2,
rotator: 1,
backRotorCounter: 1,
draw: function(inX, inY, size) 
{
	// Clear clouds
	cx.fillStyle = "white";

	// X: Rotor
	// Y: Rotor - 1
	// X: Empiric
	// Y: Empiric
	cx.fillRect(	(this.inXPrevious + 60 - (size * 60)),
			(this.inYPrevious + 35 - (35 * size)) - 1,
			142 * size,
			104 * size);

	// When parameters change
	if (this.inXPrevious != inX || this.inYPrevious != inY)
	{
		this.inXPrevious = inX;
		this.inYPrevious = inY;
	
		this.x = inX;
		this.y = inY;
	}

	// Shaking effect
	this.y == inY ? this.y = this.y + this.shakeSize : this.y = this.y - this.shakeSize;

	// Rotor
	cx.beginPath();
	cx.moveTo(this.x + 60 - (size * 60), this.y + 35 - (35 * size));
	cx.lineTo(this.x + 60 + (size * 60), this.y + 35 - (35 * size));

	// Rotation effect
	this.rotator = this.rotator == 1? 0 : 1;

	cx.strokeStyle = helicopterRotorColor;
	this.rotator == 1? cx.stroke() : 0;


	// Rotor holder
	cx.beginPath();
	cx.moveTo(this.x + 60, this.y + 35 - (25 * size));
	cx.lineTo(this.x + 60, this.y + 35 - (35 * size));
	cx.strokeStyle = helicopterRotorHolderColor;
	cx.stroke();

	// Body
	cx.beginPath();
	cx.arc(this.x + 60, this.y + 35, 25 * size, 0, 7);
	cx.fillStyle = helicopterBodyColor;
	cx.fill();

	// Window
	cx.beginPath();
	cx.arc(this.x + 60, this.y + 35, 22 * size, 3, 5);
	cx.fillStyle = helicopterWindowColor;
	cx.fill();

	// Back rotor
	cx.beginPath();
	cx.moveTo(this.x + 60 + 70 * size, this.y + 35);
	cx.arc(this.x + 60 + 70 * size, this.y + 35, 10 * size, 0 + this.backRotorCounter, 0.2 + this.backRotorCounter);
	cx.arc(this.x + 60 + 70 * size, this.y + 35, 10 * size, 3 + this.backRotorCounter, 3.2 + this.backRotorCounter);
	cx.fillStyle = helicopterBackRotorColor;
	cx.fill();

	this.backRotorCounter = this.backRotorCounter > 7? 0 : ++this.backRotorCounter;

	// Back rotor holder
	cx.beginPath();
	cx.moveTo((this.x + 60 + 25 * size), this.y + 35);
	cx.lineTo(this.x + 60 + 70 * size, this.y + 35);
	cx.strokeStyle = helicopterBackRotorColor;
	cx.stroke();

	// Ordnance holder
	cx.beginPath();
	cx.moveTo(this.x + 60, this.y + 35 + 25 * size);
	cx.lineTo(this.x + 60, this.y + 35 + 50 * size);
	cx.strokeStyle = helicopterOrdnanceHolderColor;
	cx.stroke();

	// Ordnance
	cx.beginPath();
	cx.moveTo(this.x + 60 + 20 * size, this.y + 35 + 25 * size);
	cx.lineTo(this.x + 60 - 30 * size, this.y + 35 + 65 * size);
	cx.strokeStyle = helicopterOrdnanceColor;
	cx.stroke();
}
}

function drawCCTV(x, y, width, floorHeight, floorNumbers)
{
	cx.fillStyle = "black";
	cx.strokeStyle = "black";

	var buildingHeight = floorHeight + floorHeight * floorNumbers;

	var CCTVX = y - buildingHeight;

	// Right
	cx.beginPath();
	cx.moveTo(x + width, CCTVX);
	cx.lineTo(x + width + 10, CCTVX);
	cx.lineTo(x + width + 10, CCTVX + 10);
	cx.stroke();

	cx.beginPath();
	cx.arc(x + width + 10, CCTVX + 10, 7, 6.3, 3);
	cx.fill();

	// Left
	cx.beginPath();
	cx.moveTo(x, CCTVX);
	cx.lineTo(x - 10, CCTVX);
	cx.lineTo(x - 10, CCTVX + 10);
	cx.stroke();

	cx.beginPath();
	cx.arc(x - 10, CCTVX + 10, 7, 6.3, 3);
	cx.fill();
}

var airPatrol;

function drawSecurity(security, x, y, width, floorHeight, floorNumbers)
{
	cx.strokeStyle = "black";
	cx.fillStyle = "black";

	if (security == "Optimism")
	{
		// No security
	}
	if (security == "Special forces" || security == "Paranoia")
	{
		// Hidden in undisclosed place
	}
	if (security == "Tank" || security == "Paranoia")
	{
		// Patroling
		if (myCanvasX > 640)
		{
			drawTank(x - 160, 500, 1);
		}

		if (myCanvasX > 800)
		{
			drawTank(x - 320, 500, 1);
		}

		if (myCanvasX > 960)
		{
			drawTank(x - 480, 500, 1);
		}

		if (myCanvasX > 1120)
		{
			drawTank(x - 640, 500, 1);
		}

		if (myCanvasX > 1280)
		{
			drawTank(x - 800, 500, 1);
		}
	}
	if (security == "Helicopter" || security == "Paranoia")
	{
		// Might already be set
		clearInterval(airPatrol);

		var helicopterY = 250;

		var myHelicopter = Object.create(helicopter)

		// Patroling
		if (myCanvasX > 640)
		{
			var myHelicopter2 = Object.create(helicopter)
		}

		if (myCanvasX > 800)
		{
			var myHelicopter3 = Object.create(helicopter)
		}

		if (myCanvasX > 960)
		{
			var myHelicopter4 = Object.create(helicopter)
		}

		if (myCanvasX > 1120)
		{
			var myHelicopter5 = Object.create(helicopter)
		}

		if (myCanvasX > 1280)
		{
			var myHelicopter6 = Object.create(helicopter)
		}
		// Patroling
		airPatrol = setInterval(function()
		{
			helicopterY > 65? helicopterY = helicopterY - 10 : helicopterY;

			myHelicopter.draw(x + 320, helicopterY, 1);

			if (myCanvasX > 640)
			{
				myHelicopter2.draw(x - 160, helicopterY + 50, 1);
			}

			if (myCanvasX > 800)
			{
				myHelicopter3.draw(x - 320, helicopterY, 1);
			}

			if (myCanvasX > 960)
			{
				myHelicopter4.draw(x - 480, helicopterY, 1);
			}

			if (myCanvasX > 1120)
			{
				myHelicopter5.draw(x - 640, helicopterY, 1);
			}

			if (myCanvasX > 1280)
			{
				myHelicopter6.draw(x - 800, helicopterY, 1);
			}

		}, 50);
	}
	else
	{
		clearInterval(airPatrol);
	}
	if (security == "CCTV" || security == "Paranoia")
	{
		// Roof mounted
		drawCCTV(x, y, width, floorHeight, floorNumbers);
	}
}


var form = document.querySelector("form");

form.addEventListener("change", function()
{
	if (bigENOUGH)
	{
		var width = form.elements.width.value * 10;
		var floorHeight = 50;
		var floorNumbers = form.elements.floorNumbers.value;
		var color = form.elements.color.value;
		var type = form.elements.type.value;
		var show = form.elements.show.value;
		var security = form.elements.security.value;

		var x = myCanvasX - 475;

		drawBuilding(x, 550, width, floorHeight, floorNumbers, type, color, show);

		drawSecurity(security, x, 550, width, floorHeight, floorNumbers);
	}
});

</script>

</body>
</html>

